<div class="employees-container">
  <div class="header">
    <h1>Gestion des Employés</h1>
    <button class="btn-primary" (click)="showAddForm()">
      <span class="material-icons">person_add</span>
      Ajouter Employé
    </button>
  </div>

  <!-- Employee Form -->
  <div class="form-card" *ngIf="showForm">
    <h2>{{ isEditing ? 'Modifier' : 'Ajouter' }} un Employé</h2>
    <form [formGroup]="employeeForm" (ngSubmit)="saveEmployee()">
      <div class="form-row">
        <div class="form-group">
          <label for="matricule">Matricule *</label>
          <input type="text" id="matricule" formControlName="matricule" placeholder="EMP001">
          <div class="error" *ngIf="employeeForm.get('matricule')?.invalid && employeeForm.get('matricule')?.touched">
            Matricule requis (min 3 caractères)
          </div>
        </div>
        <div class="form-group">
          <label for="nom">Nom *</label>
          <input type="text" id="nom" formControlName="nom" placeholder="Dupont">
          <div class="error" *ngIf="employeeForm.get('nom')?.invalid && employeeForm.get('nom')?.touched">
            Nom requis (min 2 caractères)
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="prenom">Prénom *</label>
          <input type="text" id="prenom" formControlName="prenom" placeholder="Jean">
          <div class="error" *ngIf="employeeForm.get('prenom')?.invalid && employeeForm.get('prenom')?.touched">
            Prénom requis (min 2 caractères)
          </div>
        </div>
        <div class="form-group">
          <label for="email">Email *</label>
          <input type="email" id="email" formControlName="email" placeholder="jean.dupont@email.com">
          <div class="error" *ngIf="employeeForm.get('email')?.invalid && employeeForm.get('email')?.touched">
            Email valide requis
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="poste">Poste *</label>
          <input type="text" id="poste" formControlName="poste" placeholder="Développeur">
          <div class="error" *ngIf="employeeForm.get('poste')?.invalid && employeeForm.get('poste')?.touched">
            Poste requis
          </div>
        </div>
        <div class="form-group">
          <label for="salaireBase">Salaire de Base *</label>
          <input type="number" id="salaireBase" formControlName="salaireBase" placeholder="2500" step="0.01">
          <div class="error" *ngIf="employeeForm.get('salaireBase')?.invalid && employeeForm.get('salaireBase')?.touched">
            Salaire requis (valeur positive)
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-primary" [disabled]="employeeForm.invalid">
          <span class="material-icons">{{ isEditing ? 'save' : 'add' }}</span>
          {{ isEditing ? 'Modifier' : 'Ajouter' }}
        </button>
        <button type="button" class="btn-secondary" (click)="cancelEdit()">
          <span class="material-icons">cancel</span>
          Annuler
        </button>
      </div>
    </form>
  </div>

  <!-- Employees List -->
  <div class="employees-list">
    <div class="list-header">
      <h2>Liste des Employés ({{ employees.length }})</h2>
    </div>

    <div class="table-container">
      <table class="employees-table">
        <thead>
          <tr>
            <th>Matricule</th>
            <th>Nom</th>
            <th>Prénom</th>
            <th>Email</th>
            <th>Poste</th>
            <th>Salaire Base</th>
            <th>Date Embauche</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let employee of employees" class="employee-row">
            <td>{{ employee.matricule }}</td>
            <td>{{ employee.nom }}</td>
            <td>{{ employee.prenom }}</td>
            <td>{{ employee.email }}</td>
            <td>{{ employee.poste }}</td>
            <td>{{ employee.salaireBase | number:'1.2-2' }} €</td>
            <td>{{ employee.dateEmbauche | date:'dd/MM/yyyy' }}</td>
            <td class="actions">
              <button class="btn-icon" (click)="editEmployee(employee)" title="Modifier">
                <span class="material-icons">edit</span>
              </button>
              <button class="btn-icon" (click)="generateQRCode(employee)" title="Générer QR Code">
                <span class="material-icons">qr_code</span>
              </button>
              <button class="btn-icon" (click)="copyQRCode(employee)" title="Copier QR Code">
                <span class="material-icons">content_copy</span>
              </button>
              <button class="btn-icon delete" (click)="deleteEmployee(employee)" title="Supprimer">
                <span class="material-icons">delete</span>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="employees.length === 0" class="empty-state">
      <span class="material-icons">people</span>
      <p>Aucun employé trouvé</p>
      <button class="btn-primary" (click)="showAddForm()">Ajouter le premier employé</button>
    </div>
  </div>
</div>
